!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react")):"function"==typeof define&&define.amd?define(["react"],t):"object"==typeof exports?exports["react-layered-image"]=t(require("react")):e["react-layered-image"]=t(e.react)}(this,(e=>(()=>{"use strict";var t,n,r={531:function(e,t,n){var r,o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},a=(Object.defineProperty(t,"__esModule",{value:!0}),t.LayeredImage=void 0,n(156)),i=n(156),c=n(737),s=((n=r=r||{}).None="NONE",n.Resize="RESIZE",n.Hover="HOVER",n.Active="ACTIVE",t.LayeredImage=function(e){function t(e,t,n,a,i){void 0===i&&(i=!1);for(var s=(u=(e=void 0===e?E.current:e)===r.Resize?P():k).width,u=u.height,l=document.documentElement.scrollLeft||document.scrollingElement.scrollLeft||window.scrollX||window.pageXOffset,d=document.documentElement.scrollTop||document.scrollingElement.scrollTop||window.scrollY||window.pageYOffset,f=(n-(g=L.current.container.current.getBoundingClientRect()).left-l)/s,h=(a-g.top-d)/u,g=(n=n-g.left-l-s/2,a=(h-(l=a-g.top-d-u/2))/(u/2)*8,(n-f)/(s/2)*8),m=.01*(f-n),y=.01*(h-l),w=(d=180*Math.atan2(l,n)/Math.PI-90,(f={})[r.None]=j,f[r.Resize]={root:{height:"".concat(u,"px"),transform:"perspective(".concat(3*s,"px)")}},f[r.Hover]={container:{transform:"rotateX(".concat(-(0,c.clamp)(a,-8,8),"deg)\n                      rotateY(").concat(-(0,c.clamp)(g,-8,8),"deg)\n                      translateX(").concat(5*-m,"px)\n                      translateY(").concat(5*-y,"px)\n                      scale(1.1)")},layer:function(e){return{transform:"translateX(".concat(1.4*(0,c.clamp)(m,-2,2)*e,"px)\n                      translateY(").concat(1.4*(0,c.clamp)(y,-2,2)*e,"px)\n                      scale(1.04)")}},light:{backgroundImage:"linear-gradient(".concat(d,"deg, ").concat(v," 0%, transparent 80%)")},shadow:{boxShadow:"0 40px 100px ".concat(b,", 0 10px 20px ").concat(b)}},f[r.Active]={container:{transitionDuration:"0.075s",transform:"rotateX(".concat(a/1.4,"deg)\n                      rotateY(").concat(g/1.4,"deg)\n                      scale(1)")},layer:function(e){return{transform:"translateX(".concat(-m*e,"px)\n                      translateY(").concat(-y*e,"px)\n                      scale(1.02)")}},light:{backgroundImage:"linear-gradient(".concat(d,"deg, ").concat(v," 0%, transparent 80%)")},shadow:o(o({},j.shadow),{transitionDuration:"0.075s"})},h=f[e],i&&t.preventDefault(),0),x=Object.entries(h);w<x.length;w++){var R=x[w];!function(e,t){"layer"===e?p.forEach((function(e,n){return(0,c.applyStyles)(L.current.layers[n].current,(0,c.isFunction)(t)?t(n):t)})):(0,c.applyStyles)(L.current[e].current,t)}(R[0],R[1])}e===r.Resize&&M({width:s,height:u}),E.current=e}function n(e){return function(n){return t(e,n,n.pageX,n.pageY,!0)}}function l(e){return function(n){return t(e,n,n.touches[0].pageX,n.touches[0].pageY)}}function d(){return t(r.None)}var f,p=e.layers,h=void 0===(R=e.aspectRatio)?1.6:R,g=void 0===(R=e.borderRadius)?12:R,m=void 0===(R=e.transitionDuration)?.15:R,y=void 0===(R=e.transitionTimingFunction)?"ease-out":R,v=void 0===(R=e.lightColor)?"#fff":R,w=void 0===(R=e.lightOpacity)?.2:R,b=void 0===(R=e.shadowColor)?"#000":R,x=void 0===(R=e.shadowOpacity)?.6:R,R=e.className,E=(e=e.style,(0,i.useRef)(r.None)),k=(f=(0,i.useState)({width:0,height:0}))[0],M=f[1],I=(f=(0,i.useState)(0))[0],O=f[1],S=(0,i.useState)(0)[1],L=(0,i.useRef)({root:(0,i.createRef)(),container:(0,i.createRef)(),layers:p.map((function(){return(0,i.createRef)()})),shadow:(0,i.createRef)(),light:(0,i.createRef)()}),j=(0,i.useMemo)((function(){return s(m,v,b)}),[m,v,b]),T=(0,i.useMemo)((function(){return{root:o(o({borderRadius:g},j.root),u.root),container:o(o({borderRadius:g,transitionTimingFunction:y},j.container),u.container),stack:o(o({borderRadius:g},j.stack),u.stack),layer:o(o({transitionTimingFunction:y},j.layer),u.layer),light:o(o({borderRadius:g,opacity:w},j.light),u.light),shadow:o(o({borderRadius:g,opacity:x,transitionTimingFunction:y},j.shadow),u.shadow)}}),[j,g,y,w,x]),P=function(){var e;return{width:e=(e=L.current.container).current.offsetWidth||e.current.clientWidth||e.current.scrollWidth,height:Math.round(e/h)}};return(0,i.useEffect)((function(){function e(){return t(r.Resize)}return p.forEach((function(e){var t=new Image;t.src=e,t.onload=function(){return O((function(e){return e+1}))},t.onerror=function(){return S((function(e){return e+1}))}})),window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]),(0,i.useEffect)((function(){t(r.Resize)}),[L.current,h]),a.createElement("div",{onMouseEnter:n(r.Hover),onMouseMove:n(),onMouseDown:n(r.Active),onMouseUp:n(r.Hover),onMouseLeave:d,onTouchStart:l(r.Hover),onTouchMove:l(r.Hover),onTouchEnd:d,className:R,style:o(o({},T.root),e),ref:L.current.root},a.createElement("div",{style:T.container,ref:L.current.container},a.createElement("div",{style:T.shadow,ref:L.current.shadow}),a.createElement("div",{style:T.stack},p.map((function(e,t){return a.createElement("div",{style:o(o({},T.layer),{backgroundImage:"url(".concat(e,")"),opacity:I===p.length?1:0}),ref:L.current.layers[t],key:t})}))),a.createElement("div",{style:T.light,ref:L.current.light})))},t.LayeredImage.displayName="LayeredImage",function(e,t,n){return{container:{transform:"none",transitionDuration:"".concat(e,"s")},layer:{transform:"none",transitionDuration:"".concat(e,"s, 500ms")},light:{backgroundImage:"linear-gradient(180deg, ".concat(t," 0%, transparent 80%)")},shadow:{boxShadow:"0 10px 30px ".concat(n,", 0 6px 10px ").concat(n),transitionDuration:"".concat(e,"s")}}}),u={root:{position:"relative",width:"100%",transformStyle:"preserve-3d",cursor:"pointer",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},container:{position:"absolute",width:"100%",height:"100%",transitionProperty:"transform",transformStyle:"preserve-3d"},stack:{position:"absolute",width:"100%",height:"100%",background:"black",transformStyle:"preserve-3d",overflow:"hidden"},layer:{position:"absolute",width:"100%",height:"100%",backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundColor:"transparent",backgroundSize:"cover",transitionProperty:"transform, opacity",opacity:0},light:{position:"absolute",width:"100%",height:"100%"},shadow:{position:"absolute",width:"100%",height:"100%",transitionProperty:"transform, box-shadow",transform:"translateZ(-10px) scale(0.95)"}}},737:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isFunction=t.clamp=t.applyStyles=void 0,t.applyStyles=function(e,t){for(var n=0,r=Object.entries(t);n<r.length;n++){var o=(a=r[n])[0],a=a[1];e.style[o]=a}},t.clamp=function(e,t,n){return n=n<t?t:n,null!=e?Math.min(Math.max(e,t),n):e},t.isFunction=function(e){return"function"==typeof e}},156:t=>{t.exports=e}},o={},a={};return t=a,Object.defineProperty(t,"__esModule",{value:!0}),t.LayeredImage=void 0,n=function e(t){var n=o[t];return void 0!==n||(n=o[t]={exports:{}},r[t].call(n.exports,n,n.exports,e)),n.exports}(531),Object.defineProperty(t,"LayeredImage",{enumerable:!0,get:function(){return n.LayeredImage}}),a})()));
//# sourceMappingURL=index.js.map